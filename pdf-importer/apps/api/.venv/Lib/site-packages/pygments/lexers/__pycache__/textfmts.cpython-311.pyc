"""
Our exception hierarchy:

* HTTPError
  x RequestError
    + TransportError
      - TimeoutException
        Â· ConnectTimeout
        Â· ReadTimeout
        Â· WriteTimeout
        Â· PoolTimeout
      - NetworkError
        Â· ConnectError
        Â· ReadError
        Â· WriteError
        Â· CloseError
      - ProtocolError
        Â· LocalProtocolError
        Â· RemoteProtocolError
      - ProxyError
      - UnsupportedProtocol
    + DecodingError
    + TooManyRedirects
  x HTTPStatusError
* InvalidURL
* CookieConflict
* StreamError
  x StreamConsumed
  x StreamClosed
  x ResponseNotRead
  x RequestNotRead
"""

from __future__ import annotations

import contextlib
import typing

if typing.TYPE_CHECKING:
    from ._models import Request, Response  # pragma: no cover

__all__ = [
    "CloseError",
    "ConnectError",
    "ConnectTimeout",
    "CookieConflict",
    "DecodingError",
    "HTTPError",
    "HTTPStatusError",
    "InvalidURL",
    "LocalProtocolError",
    "NetworkError",
    "PoolTimeout",
    "ProtocolError",
    "ProxyError",
    "ReadError",
    "ReadTimeout",
    "RemoteProtocolError",
    "RequestError",
    "RequestNotRead",
    "ResponseNotRead",
    "StreamClosed",
    "StreamConsumed",
    "StreamError",
    "TimeoutException",
    "TooManyRedirects",
    "TransportError",
    "UnsupportedProtocol",
    "WriteError",
    "WriteTimeout",
]


class HTTPError(Exception):
    """
    Base class for `RequestError` and `HTTPStatusError`.

    Useful for `try...except` blocks when issuing a request,
    and then calling `.raise_for_status()`.

    For example:

    ```
    try:
        response = httpx.get("https://www.example.com")
        response.raise_for_status()
    except httpx.HTTPError as exc:
        print(f"HTTP Exception for {exc.request.url} - {exc}")
    ```
    """

    def __init__(self, message: str) -> None:
        super().__init__(message)
        self._request: Request | None = None

    @property
    def request(self) -> Request:
        if self._request is None:
            raise RuntimeError("The .request property has not been set.")
        return self._request

    @request.setter
    def request(self, request: Request) -> None:
        self._request = request


class RequestError(HTTPError):
    """
    Base class for all exceptions that may occur when issuing a `.request()`.
    """

    def __init__(self, message: str, *, request: Request | None = None) -> None:
        super().__init__(message)
        # At the point an exception is raised we won't typically have a request
        # instance to associate it with.
        #
        # The 'request_context' context manager is used within the Client and
        # Response methods in order to ensure that any raised exceptions
        # have a `.request` property set on them.
        self._request = request


class TransportError(RequestError):
    """
    Base class for all exceptions that occur at the level of the Transport API.
    """


# Timeout exceptions...


class TimeoutException(TransportError):
    """
    The base class for timeout errors.

    An operation has timed out.
    """


class ConnectTimeout(TimeoutException):
    """
    Timed out while connecting to the host.
    """


class ReadTimeout(TimeoutException):
    """
    Timed out while receiving data from the host.
    """


class WriteTimeout(TimeoutException):
    """
    Timed out while sending data to the host.
    """


class PoolTimeout(TimeoutException):
    """
    Timed out waiting to acquire a connection from the pool.
    """


# Core networking exceptions...


class NetworkError(TransportError):
    """
    The base class for network-related errors.

    An error occurred while interacting with the network.
    """


class ReadError(NetworkError):
    """
    Failed to receive data from the network.
    """


class WriteError(NetworkError):
    """
    Failed to send data through the network.
    """


class ConnectError(NetworkError):
    """
    Failed to establish a connection.
    """


class CloseError(NetworkError):
    """
    Failed to close a connection.
    """


# Other transport exceptions...


class ProxyError(TransportError):
    """
    An error occurred while establishing a proxy connection.
    """


class UnsupportedProtocol(TransportError):
    """
    Attempted to make a request to an unsupported protocol.

    For example issuing a request to `ftp://www.example.com`.
    """


class ProtocolError(TransportError):
    """
    The protocol was violated.
    """


class LocalProtocolError(ProtocolError):
    """
    A protocol was violated by the client.

    For example if the user instantiated a `Request` instance explicitly,
    failed to include the mandatory `Host:` header, and then issued it directly
    using `client.send()`.
    """


class RemoteProtocolError(ProtocolError):
    """
    The protocol was violated by the server.

    For example, returning malformed HTTP.
    """


# Other request exceptions...


class DecodingError(RequestError):
    """
    Decoding of the response failed, due to a malformed encoding.
    """


class TooManyRedirects(RequestError):
    """
    Too many redirects.
    """


# Client errors


class HTTPStatusError(HTTPError):
    """
    The response had an error HTTP status of 4xx or 5xx.

    May be raised when calling `response.raise_for_status()`
    """

    def __init__(self, message: str, *, request: Request, response: Response) -> None:
        super().__init__(message)
        self.request = request
        self.response = response


class InvalidURL(Exception):
    """
    URL is improperly formed or cannot be parsed.
    """

    def __init__(self, message: str) -> None:
        super().__init__(message)


class CookieConflict(Exception):
    """
    Attempted to lookup a cookie by name, but multiple cookies existed.

    Can occur when calling `response.cookies.get(...)`.
    """

    def __init__(self, message: str) -> None:
        super().__init__(message)


# Stream exceptions...

# These may occur as the result of a programming error, by accessing
# the request/response stream in an invalid manner.


class StreamError(RuntimeError):
    """
    The base class for stream exceptions.

    The developer made an error in accessing the request stream in
    an invalid way.
    """

    def __init__(self, message: str) -> None:
        super().__init__(message)


class StreamConsumed(StreamError):
    """
    Attempted to read or stream content, but the content has already
    been streamed.
    """

    def __init__(self) -> None:
        message = (
            "Attempted to read or stream some content, but the content has "
            "already been streamed. For requests, this could be due to passing "
            "a generator as request content, and then receiving a redirect "
            "response or a secondary request as part of an authentication flow."
            "For responses, this could be due to attempting to stream the response "
            "content more than once."
        )
        super().__init__(message)


class StreamClosed(StreamError):
    """
    Attempted to read or stream response content, but the request has been
    closed.
    """

    def __init__(self) -> None:
        message = (
            "Attempted to read or stream content, but the stream has " "been closed."
        )
        super().__init__(message)


class ResponseNotRead(StreamError):
    """
    Attempted to access streaming response content, without having called `read()`.
    """

    def __init__(self) -> None:
        message = (
            "Attempted to access streaming response content,"
            " without having called `read()`."
        )
        super().__init__(message)


class RequestNotRead(StreamError):
    """
    Attempted to access streaming request content, without having called `read()`.
    """

    def __init__(self) -> None:
        message = (
            "Attempted to access streaming request content,"
            " without having called `read()`."
        )
        super().__init__(message)


@contextlib.contextmanager
def request_context(
    request: Request | None = ÎÊï¾   ‘   lSystem.Resources.ResourceReader, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089#System.Resources.RuntimeResourceSet          PADPADP°6jû</S?oópx\       -   ]  (D e l e t i o n   N o t   A l l o w e d     *D o c u m e n t   T y p e   D e l e t e d    0D o c u m e n t   T y p e   N o t   F o u n d ! 6   Verwijderen niet toegestaanDocumenttype verwijderdDocumenttype niet gevonden!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ]µˆ¥ÅÉ#è€AqÈWo^±nÆ¦ƒEtãèMUõü¬Û¥À=&„÷»èQÄ½{µ‡ØÄËQFOæ^Š—Ÿê,J68ô@úw¨æMœp7º­kÃ~¦(+BløÉLÖçòÌ6r1îd:ÆpÜFÅèPÌÒnDû‡?jQñDIî;dÕ8l—8ÄqËŞ¥Ï·jã–_Ä‡n¿°fÓÂ²gæßé&øÏJ4n»ø…‡n;a…ûV¥ØVıRË–Ê¬±t¯ˆ‘IÙP¾)øJsÛ&’àÈ©¯ ğ:Yp§·†™	½€3g‡ÕuéNøìµgZÈT7&WèIäAßD$Ì+x§ó;cüà…JqR®QÓ=˜ašÒş’F&ÛRY8VSJÛ©¢Õºü•3G{8±0ÙŒõ¥¤›ÉŞ’8Û`¥|‘-jêßØÙºE%n'EœJhdåXlp~áIóAÄK7æ4h “Tüîõ’L¬¦O™ßjÌ¶ş„ª%Ë$,@²ÊYõÁ>«÷h@fLŒ{Õ¯j5Y„FÓ¨`«3Rª75 ˜#6v] î'e˜ùèÀ	eZ‚g[Ï§W™ëîÿ9-¦ÉÔP×}ómWwÃ|¢ş°á\¸…Ë™­KSg•S®Ts
š`X[¯Ášw\‰-Ç{{†Ü³6`…ÛŒz?&¤Ş—HŒô”¸ÂÓy×‡~B:ÓUª€vèâñÓ¨Àı¬aï(ná'ÌŸï{qš`±¿Sã ùZÑ _ìojµ£è´ìõıñ~Sÿ|ÉÓbÕäÃ-(rIş^”-ã$7õ|Ãèˆú$o}†W—–úw1Â|¼”†Ï’†ƒ%1Ii;¯ åT†Ÿx
É;GöO›ğ`Ì™kæ~"~ï%¥«‚Èb
nB22&DÀŒi»4ÿ¸ÇÛ·Úïc%ãå^œ^=ÑòâùÄëØÉWs	ÜËN/¥ÿÅ>,s@š+…åT7x Ò¹C¼JN0úõ¯}ÎSÈjeôıî¤_$ø¡¸`—s!ªrù­1¦¶ö‘ÖDÛ4­ZĞyÓ'ÙöbËb:®ú¹YW³Éº¨?vöqÂóƒúí:¬æ-¹¬¸äº³¹uZÔIğ»×lÿ˜-çÂ7î=§Âá"³Ş²IkÄS·¼‹¬•¥Ö	F9X°Ä­sqÇ@¹•s9ãXdn7ŸÇë+ÒI"Î”Poè2É,’Ñ|«Õaõ5)1ŠZÆ¯Ğyôó®‹”¾·¼õî*ş¥÷Å‡nØã–´­H1%¾¥õl·š×ü›X†•®róßñçƒaQ)´şQŞ¾“ôõ
&–Óû TVSqdÅb²N\!Ş’Rn‡‰<ır7¦‰ÎÛ"FNÍà‘=IJÑìT³Å:XJ¥’{·¬–İ“°‘G§zšŞ¶ºÆĞ)şŠYşáLçj?™­±D××«MEm!Hˆ‡h%Ãuõ"YNŸ‹DÀnXÍ,#¯Â}?Ä€®åàÃ»<—ˆ<¨fÍh¸ÈUå*—×ŒÓóeYƒ=WĞk“ÒÀÌFI¬ts×?’Á=2ÎZ=&GT‰[A[HÌ»;½i¶FÊ§²îƒ½«Á³Ÿî"ğƒ\õtÑä±^~ƒz$ÔO˜r0äŠ¤¡”têHı‚5'u.|¬õ PºõÙ¾€Š­¦Ë&&ãŞA„Lóó»Î·Õy…	]ä@…œå™a„±¨*Ñîœğ7ÑL‹.4*w¹pöã™ßÁ>	_/ş+ŠŸoùè¬ğ_µV0­]f¯oOûa @œbI!fµHÔBìL]<v¦Ùwáì£N—!Å˜æHé½ö7­¢¨Å<3Ÿ£J±ë‡ı1È‡€Ç´éÈ?Æáì“W»:ó‚_= g1!Ï8é­üİë‰LÏã^J%NÕ4€'ßÆR
t €ê¥2—b7‚˜µúÀEÆƒ=•µ34‘Ğs€Ù?U†ÿıÊ›ƒtp½ûDîø
§FÀ‹ı£ˆå:~tŠyİõü¡Ùbx»!4	M³Æ¡£ªÊ¿¶På¸X´ßsT'´«]}jäwûØ7+OËXü‚½1ì­èZs–Ô¨dåèr!âÄeY^S
 »›ôAÃøéR([júõŞ®ĞÈKı|ƒÎÁúË~½cc0­ä8m¡ôzRñû–ú¡RGÔıRİ=²ËÊ"g1 g¥ÉÂf¦¯«~âª©”_óysEv>§¨\_ï.y`²¬ÕÀ[êp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         	îw„l¤ûVA{Ô³â¾
H # #Ç_:'
·&	–rH	P77                                         º   Î0tubuf¸S ñÿ˜ ÿÿ  € ÿÿencryptedVaultDataSourceºHÇ  Í0tubuf¨R 